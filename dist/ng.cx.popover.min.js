/**********************************************************
 * 
 * ng.cx.popover - v0.0.10
 * 
 * Release date : 2016-01-02 : 18:52
 * Author       : Jaime Beneytez - EF CTX 
 * License      : MIT 
 * 
 **********************************************************/



!function(a){"use strict";a.module("ng.cx.popover",["ng.cx.popover.trigger","ng.cx.popover.popover","ng.cx.popover.service"]),a.module("ng.cx.popover.popover",["ngAnimate","ng.cx.popover.service"]).directive("cxPopover",[function(){return{replace:"element",transclude:!0,template:'<div class="cx-popover" ng-show="isVisible" ng-class="{\'visible\':isVisible}"><div class="arrow"></div><div ng-transclude></div></div>',scope:{},bindToController:{ioPopoverId:"@cxPopoverIoPopoverId"},controller:"cxPopoverController as cxPopoverController"}}]).controller("cxPopoverController",["$scope","$document","$element","$animate","cxPopoverService",function(a,b,c,d,e){function f(){e.registrerPopover(m),b.find("body").append(c),a.$applyAsync(g)}function g(){c.css("opacity","0"),l=c[0].getBoundingClientRect(),c.css("opacity",null)}function h(b,d){c.addClass(d),j(b,d),o=!0,a.$applyAsync()}function i(){o=!1,j(),a.$evalAsync()}function j(a,b){function e(a){c.css("top",a.top),c.css("left",a.left)}a&&b?e(k(a,b)):d.on("addClass",c,e)}function k(a,b){var c,d,e=a[0].getBoundingClientRect(),f=l;switch(b){case"right":c=e.top+e.height/2-f.height/2,d=e.left+e.width;break;case"left":c=e.top+e.height/2-f.height/2,d=e.left-f.width;break;case"top":d=e.left+e.width/2-f.width/2,c=e.top-f.height;break;case"bottom":d=e.left+e.width/2-f.width/2,c=e.top+e.height}return{top:c+"px",left:d+"px"}}var l,m=this,n=this.ioPopoverId,o=!1;this.show=h,this.hide=i,Object.defineProperty(a,"isVisible",{get:function(){return o}}),Object.defineProperty(m,"isVisible",{get:function(){return o}}),Object.defineProperty(m,"popoverId",{get:function(){return n}}),f()}]),a.module("ng.cx.popover.service",["ngAnimate"]).service("cxPopoverService",[function(){function a(a){d[a.popoverId]=a}function b(a){return d[a]}function c(){for(var a in d)d[a].hide()}var d={};this.registrerPopover=a,this.getPopoverById=b,this.hideAll=c}]),a.module("ng.cx.popover.trigger",["ngAnimate","ng.cx.popover.service"]).directive("cxPopoverTrigger",["$document",function(a){return{scope:{},bindToController:{ioPopoverId:"@cxPopoverTriggerIoPopoverId",ioPlacement:"@cxPopoverTriggerIoPlacement",ioEvent:"@cxPopoverTriggerIoEvent",ioEnabled:"=cxPopoverTriggerIoEnabled"},controller:"cxPopoverTriggerController as cxPopoverTriggerController"}}]).controller("cxPopoverTriggerController",["$scope","$document","$element","cxPopoverService",function(a,b,c,d){function e(){h(o.ioEvent)}function f(){o.ioEnabled&&(d.hideAll(),n.show(c,o.ioPlacement))}function g(){n.hide()}function h(){switch(o.ioEvent){case"mouseenter":i(f),k();break;case"click":i(l)}}function i(a){m=a,c.on(o.ioEvent,j)}function j(a){n=d.getPopoverById(p),c.off(o.ioEvent,j),c.on(o.ioEvent,m),m(a)}function k(){c.on("mouseleave",g),c.on("click",g)}function l(a){a.stopImmediatePropagation(),n.isVisible?(b.off("click",g),g()):(b.on("click",g),f())}var m,n,o=this,p=this.ioPopoverId;o.ioEnabled=o.ioEnabled||!0,o.ioEvent=o.ioEvent||"mouseenter",o.ioPlacement=o.ioPlacement||"right",e()}])}(angular);